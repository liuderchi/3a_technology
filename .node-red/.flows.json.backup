[{"id":"49459178.c9087","type":"tab","label":"heroku server","disabled":false,"info":""},{"id":"6962b061.aeb91","type":"http request","z":"49459178.c9087","name":"LINE REPLY API","method":"POST","ret":"txt","paytoqs":false,"url":"https://api.line.me/v2/bot/message/reply","tls":"","persist":false,"proxy":"","authType":"","x":630,"y":220,"wires":[[]]},{"id":"8947272.c0846d8","type":"http in","z":"49459178.c9087","name":"line bot server","url":"/linebot","method":"post","upload":false,"swaggerDoc":"","x":110,"y":160,"wires":[["3230da25.170a46","942a2464.2ebee8","bc3973ae.6ca2","5d299648.1869b8"]]},{"id":"3230da25.170a46","type":"debug","z":"49459178.c9087","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":390,"y":60,"wires":[]},{"id":"86ab75ed.4a0028","type":"function","z":"49459178.c9087","name":"æ‡‰è²èŸ²","func":"var event = msg.payload[\"events\"][0];\nif(event[\"message\"][\"type\"] != \"text\"){\n    return msg;\n}\n\nvar message = event[\"message\"][\"text\"];\ncontext.global.replyToken = event[\"replyToken\"];\n\nvar replyMessage = {\"type\": \"text\", \"text\": messge};\n\nmsg.payload = {\"messages\": [replyMessage],\"replyToken\": context.global.replyToken}; \nmsg.headers  = {\"Content-Type\": \"application/json\",\"Authorization\": \"Bearer \"+context.global.token}; \nmsg.payload.headers = msg.headers;\n\nreturn msg;\n","outputs":1,"noerr":0,"x":350,"y":140,"wires":[[]]},{"id":"942a2464.2ebee8","type":"function","z":"49459178.c9087","name":"å›æ‡‰åç‰‡è³‡è¨Š","func":"var event = msg.payload[\"events\"][0];\nif(event[\"message\"][\"type\"] != \"text\"){\n    return msg;\n}\n\nvar message = event[\"message\"][\"text\"];\ncontext.global.replyToken = event[\"replyToken\"];\n\nvar replyflex = \n{\n    \"type\": \"flex\",\n    \"altText\": \"å±±é›²ç§‘æŠ€åç‰‡ç®¡ç†\",\n    \"contents\": context.global.bussiness_card_select\n}\n\n\nif(message==\"åç‰‡\")\n{\n    msg.payload = {\"messages\": [replyflex],\"replyToken\": context.global.replyToken};\n    msg.headers  = {\"Content-Type\": \"application/json\",\"Authorization\": \"Bearer \"+context.global.token}; \n    return msg;\n}","outputs":1,"noerr":0,"x":360,"y":200,"wires":[["6962b061.aeb91"]]},{"id":"1d5809ae.30e3a6","type":"inject","z":"49459178.c9087","name":"token set","topic":"","payload":"rmKos2MuICJwAMg6wPW/7Gdh9MircQxXLZ7BjCbXHG+IdD29LfFFXHgFgNrzq7M8kBc+GD9YZOT4oITZG0aMaRdCdWbeuWjnvoLET2cMTtej/jViP6x8EtH3Ql6RerM8P+64CfmkEEgpYxB8dGUHRQdB04t89/1O/w1cDnyilFU=","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"2","x":120,"y":460,"wires":[["c059efc4.21fbb","c344d73d.058758"]]},{"id":"3cf0dc66.6b5ff4","type":"comment","z":"49459178.c9087","name":"token","info":"","x":101.20000457763672,"y":421.3999843597412,"wires":[]},{"id":"c059efc4.21fbb","type":"function","z":"49459178.c9087","name":"","func":"context.global.token = msg.payload;\ncontext.global.bussiness_card = []\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":460,"wires":[[]]},{"id":"c344d73d.058758","type":"function","z":"49459178.c9087","name":"é›»å­åç‰‡init","func":"context.global.bussiness_card['Jasonåç‰‡'] = {\n  \"type\": \"carousel\",\n  \"contents\": [\n    {\n      \"type\": \"bubble\",\n      \"hero\": {\n        \"type\": \"image\",\n        \"size\": \"full\",\n        \"aspectRatio\": \"20:13\",\n        \"aspectMode\": \"cover\",\n        \"url\": \"https://imgur.com/rn2QJgJ.jpg\"\n      },\n      \"body\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"JasonğŸŒ»\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"å±±é›²å‰µæ–°ç§‘æŠ€-ç‰©è¯ç¶²è¬›å¸«\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"ICè¨­è¨ˆå…¬å¸è»Ÿé«”å·¥ç¨‹å¸« \",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          }\n        ]\n      },\n      \"footer\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"button\",\n            \"style\": \"primary\",\n            \"action\": {\n              \"type\": \"uri\",\n              \"label\": \"èˆ‡æˆ‘è¯ç¹«\",\n              \"uri\": \"https://line.me/ti/p/Rjiz_ydf2Z\"\n            },\n            \"color\": \"#00ACC7\"\n          },\n          {\n            \"type\": \"button\",\n            \"style\": \"primary\",\n            \"action\": {\n              \"type\": \"uri\",\n              \"label\": \"åˆ†äº«æˆ‘çš„åç‰‡\",\n              \"uri\": \"https://liff.line.me/1655037923-0PdL588g\"\n            },\n            \"color\": \"#00ACC7\"\n          },\n          {\n            \"type\": \"button\",\n            \"flex\": 2,\n            \"style\": \"primary\",\n            \"color\": \"#00ACC7\",\n            \"action\": {\n              \"type\": \"uri\",\n              \"label\": \"å®˜æ–¹ç¶²ç«™\",\n              \"uri\": \"https://3anology.com.tw/\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"type\": \"bubble\",\n      \"hero\": {\n        \"type\": \"image\",\n        \"size\": \"full\",\n        \"aspectRatio\": \"20:13\",\n        \"aspectMode\": \"cover\",\n        \"url\": \"https://imgur.com/zCYprab.jpg\"\n      },\n      \"body\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"å°ˆæ¥­æŠ€èƒ½ğŸŒ»\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"C/C++ï¼ŒNode-Red(IOT)\",\n                \"wrap\": true,\n                \"size\": \"sm\",\n                \"flex\": 0,\n                \"weight\": \"bold\"\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"ROS(æ©Ÿå™¨äººé–‹æºå¹³å°)\",\n                \"wrap\": true,\n                \"size\": \"sm\",\n                \"flex\": 0,\n                \"weight\": \"bold\"\n              }\n            ]\n          },\n          {\n            \"type\": \"text\",\n            \"text\": \"æˆèª²ç¶“æ­·ğŸŒ»\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"ã€å·¥ç ”é™¢ã€‘æ‰“é€ Line-bot èŠå¤©æ©Ÿå™¨äºº\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"ã€è³‡ç­–æœƒã€‘Node-red in raspberry pi\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"text\",\n            \"text\": \"å­¸æ­·ğŸŒ»\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"å°ç£å¤§å­¸æ©Ÿæ¢°ç³»\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"å°ç£å¤§å­¸æ©Ÿæ¢°æ‰€-æ§åˆ¶çµ„\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          }\n        ]\n      }\n    }\n  ]\n}\n\ncontext.global.bussiness_card['Cathyåç‰‡'] = {\n  \"type\": \"carousel\",\n  \"contents\": [\n    {\n      \"type\": \"bubble\",\n      \"hero\": {\n        \"type\": \"image\",\n        \"size\": \"full\",\n        \"aspectRatio\": \"20:13\",\n        \"aspectMode\": \"cover\",\n        \"url\": \"https://imgur.com/zCYprab.jpg\"\n      },\n      \"body\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"é˜¿è“ğŸŒ»Cathy\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"å‘æ—¥æ¨¹æ•¸ä½è½‰å‹xäººæ‰åŸ¹è¨“-å‰µè¾¦äºº\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"å±±é›²å‰µæ–°ç§‘æŠ€-æ•™è‚²æ¨å»£ç¶“ç†å…¼è¬›å¸«\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"æŸ¯æ—å»£å‘Š&å»ºè¨­-è¡ŒéŠ·æ¥­å‹™ç¶“ç†\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0\n              }\n            ]\n          }\n        ]\n      },\n      \"footer\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"button\",\n            \"style\": \"primary\",\n            \"action\": {\n              \"type\": \"uri\",\n              \"label\": \"èˆ‡æˆ‘è¯ç¹«\",\n              \"uri\": \"https://line.me/ti/p/9iGVGw7uUK\"\n            },\n            \"color\": \"#00ACC7\"\n          },\n          {\n            \"type\": \"button\",\n            \"style\": \"primary\",\n            \"action\": {\n              \"type\": \"uri\",\n              \"label\": \"åˆ†äº«æˆ‘çš„åç‰‡\",\n              \"uri\": \"https://liff.line.me/1655037923-NeplmXXM\"\n            },\n            \"color\": \"#00ACC7\"\n          }\n        ]\n      }\n    },\n    {\n      \"type\": \"bubble\",\n      \"hero\": {\n        \"type\": \"image\",\n        \"size\": \"full\",\n        \"aspectRatio\": \"20:13\",\n        \"aspectMode\": \"cover\",\n        \"url\": \"https://imgur.com/ediZum8.jpg\"\n      },\n      \"body\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"äººæ‰åŸ¹è¨“ğŸŒ»æˆèª²ç¶“æ­·\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"åœ‹ç«‹å°åŒ—å•†æ¥­å¤§å­¸å¤¢æƒ³å¤§å­¸è¬›åº§\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"xs\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"åƒ‘å…‰ç§‘æŠ€å¤§å­¸è¡ŒéŠ·æ¥­ç•Œè¬›å¸«\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"xs\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"é‡‘ç”Œå¥³ä¸­å¤šåª’é«”ç§‘æŠ€è·è¬›å¸«\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"xs\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"è‡ºåŒ—å¸‚ç«‹åœ–æ›¸é¤¨æ¨å»£æ´»å‹•è¬›å¸«\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"xs\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"è‡ºåŒ—å¸‚ç«‹è¢æ©‹åœ‹ä¸­ã€æˆæ·µä¸­å­¸ã€æ™¯èˆˆåœ‹ä¸­æ¥­å¸«\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"xs\",\n                \"flex\": 0\n              }\n            ]\n          }\n        ]\n      },\n      \"footer\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"button\",\n            \"flex\": 2,\n            \"style\": \"primary\",\n            \"color\": \"#00ACC7\",\n            \"action\": {\n              \"type\": \"uri\",\n              \"label\": \"å®˜æ–¹ç¶²ç«™\",\n              \"uri\": \"https://3anology.com.tw/\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"type\": \"bubble\",\n      \"hero\": {\n        \"type\": \"image\",\n        \"size\": \"full\",\n        \"aspectRatio\": \"20:13\",\n        \"aspectMode\": \"cover\",\n        \"url\": \"https://imgur.com/WgHrYH0.jpg\"\n      },\n      \"body\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"å¤šåª’é«”è¨­è¨ˆğŸŒ»æœå‹™é …ç›®\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"LINEé›»å­åç‰‡\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"md\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"LINEå®˜æ–¹å¸³è™Ÿ2.0\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"md\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"LINEè²¼åœ–\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"md\",\n                \"flex\": 0\n              }\n            ]\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"æ–‡å‰µå‘¨é‚Šå•†å“\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"md\",\n                \"flex\": 0\n              }\n            ]\n          }\n        ]\n      },\n      \"footer\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"button\",\n            \"flex\": 2,\n            \"style\": \"primary\",\n            \"color\": \"#00ACC7\",\n            \"action\": {\n              \"type\": \"uri\",\n              \"label\": \"LINEå®˜æ–¹å¸³è™Ÿ\",\n              \"uri\": \"https://line.me/R/ti/p/%40xfa0129y\"\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n\n\ncontext.global.bussiness_card_select = {\n  \"type\": \"carousel\",\n  \"contents\": [\n    {\n      \"type\": \"bubble\",\n      \"hero\": {\n        \"type\": \"image\",\n        \"size\": \"full\",\n        \"aspectRatio\": \"20:13\",\n        \"aspectMode\": \"cover\",\n        \"url\": \"https://imgur.com/rn2QJgJ.jpg\"\n      },\n      \"body\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"å±±é›²å‰µæ–°ç§‘æŠ€-é›»å­åç‰‡\",\n            \"wrap\": true,\n            \"weight\": \"bold\",\n            \"size\": \"xl\",\n            \"style\": \"normal\",\n            \"align\": \"center\"\n          },\n          {\n            \"type\": \"box\",\n            \"layout\": \"baseline\",\n            \"contents\": [\n              {\n                \"type\": \"text\",\n                \"text\": \"AIOTç‰©è¯ç¶²é–‹ç™¼xæ•¸ä½è½‰å‹xäººæ‰åŸ¹è¨“\",\n                \"wrap\": true,\n                \"weight\": \"bold\",\n                \"size\": \"sm\",\n                \"flex\": 0,\n                \"align\": \"center\",\n                \"style\": \"normal\"\n              }\n            ]\n          }\n        ]\n      },\n      \"footer\": {\n        \"type\": \"box\",\n        \"layout\": \"vertical\",\n        \"spacing\": \"sm\",\n        \"contents\": [\n          {\n            \"type\": \"button\",\n            \"style\": \"primary\",\n            \"action\": {\n              \"type\": \"message\",\n              \"label\": \"Cathy\",\n              \"text\": \"Cathyåç‰‡\"\n            },\n            \"color\": \"#00ACC7\"\n          },\n          {\n            \"type\": \"button\",\n            \"style\": \"primary\",\n            \"action\": {\n              \"type\": \"message\",\n              \"label\": \"Jason\",\n              \"text\": \"Jasonåç‰‡\"\n            },\n            \"color\": \"#00ACC7\"\n          }\n        ]\n      }\n    }\n  ]\n}","outputs":1,"noerr":0,"x":290,"y":520,"wires":[[]]},{"id":"bc3973ae.6ca2","type":"function","z":"49459178.c9087","name":"å›æ‡‰åç‰‡å…§å®¹ flex message","func":"var event = msg.payload[\"events\"][0];\nif(event[\"message\"][\"type\"] != \"text\"){\n    return msg;\n}\n\nvar message = event[\"message\"][\"text\"];\ncontext.global.replyToken = event[\"replyToken\"];\n\n\nif(context.global.bussiness_card.hasOwnProperty(message))\n{\n    var replycarousel = \n    {\n        \"type\": \"flex\",\n        \"altText\": \"å±±é›²ç§‘æŠ€é›»å­åç‰‡\",\n        \"contents\": context.global.bussiness_card[message]\n    }\n    msg.payload = {\"messages\": [replycarousel],\"replyToken\": context.global.replyToken};\n    msg.headers  = {\"Content-Type\": \"application/json\",\"Authorization\": \"Bearer \"+context.global.token}; \n    return msg;\n}","outputs":1,"noerr":0,"x":360,"y":260,"wires":[["6962b061.aeb91"]]},{"id":"5d299648.1869b8","type":"function","z":"49459178.c9087","name":"å›æ‡‰ flex messg ","func":"var event = msg.payload[\"events\"][0];\nif(event[\"message\"][\"type\"] != \"text\"){\n    return msg;\n}\n\nvar message = event[\"message\"][\"text\"];\ncontext.global.replyToken = event[\"replyToken\"];\n\nvar replycarousel = \n{\n    \"type\": \"flex\",\n    \"altText\": \"å±±é›²ç§‘æŠ€é›»å­åç‰‡\",\n    \"contents\": JSON.parse(message)\n}\nmsg.payload = {\"messages\": [replycarousel],\"replyToken\": context.global.replyToken};\nmsg.headers  = {\"Content-Type\": \"application/json\",\"Authorization\": \"Bearer \"+context.global.token}; \nreturn msg;\n\n\n","outputs":1,"noerr":0,"x":360,"y":320,"wires":[["6962b061.aeb91"]]}]